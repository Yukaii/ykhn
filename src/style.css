@import "tailwindcss";

@theme {
  --font-mono: "VT323", "Courier New", Courier, monospace;
  --font-content: "JetBrains Mono", monospace;
  --color-tui-bg: #0000aa;
  --color-tui-text: #ffffff;
  --color-tui-cyan: #55ffff;
  --color-tui-yellow: #ffff55;
  --color-tui-gray: #aaaaaa;
  --color-tui-border: #ffffff;
  --color-tui-active: #00aaaa;
}

@layer base {
  :root {
    --tui-font-size: 16px;
    --tui-content-font-scale: 0.94;
  }

  /* Themes (default is commander via @theme) */
  :root[data-theme='dark'] {
    --color-tui-bg: #000000;
    --color-tui-text: #ffffff;
    --color-tui-border: #ffffff;
    --color-tui-gray: #444444;
    --color-tui-active: #1f1f1f;
    --color-tui-cyan: #ffffff;
    --color-tui-yellow: #ffffff;
  }

  :root[data-theme='light'] {
    --color-tui-bg: #ffffff;
    --color-tui-text: #000000;
    --color-tui-border: #000000;
    --color-tui-gray: #333333;
    --color-tui-active: #dcdcdc;
    --color-tui-cyan: #000000;
    --color-tui-yellow: #000000;
  }

  html {
    font-size: var(--tui-font-size);
  }

  body {
    @apply bg-tui-bg text-tui-text font-mono;
    -webkit-font-smoothing: none;
    image-rendering: pixelated;
    font-size: 1rem;
    line-height: 1.2;
  }

  .font-content {
    font-size: calc(1em * var(--tui-content-font-scale));
  }
 
  /* Norton Commander style scrollbar */
  ::-webkit-scrollbar {
    width: 12px;
  }
  ::-webkit-scrollbar-track {
    @apply bg-tui-active;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-tui-gray border-2 border-tui-bg;
  }

  /* Custom scrollbar for the main area */
  .custom-scrollbar::-webkit-scrollbar {
    width: 16px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-tui-active/50;
    box-shadow: inset 2px 2px 0px rgba(0,0,0,0.5);
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-tui-gray border-2 border-tui-bg;
    box-shadow: 2px 2px 0px rgba(0,0,0,0.8);
  }

  a {
    @apply transition-none;
  }

  #app {
    @apply h-screen w-screen overflow-hidden bg-tui-bg;
  }
}

@layer components {
  .tui-window {
    @apply border-2 border-tui-border bg-tui-bg shadow-[6px_6px_0px_#000000];
  }

  .tui-title-bar {
    @apply bg-tui-cyan text-tui-bg px-2 font-bold flex justify-between items-center uppercase border-b-2 border-tui-border;
  }

  .tui-comment-card {
    @apply border border-tui-active bg-tui-bg p-2 mb-2 relative overflow-hidden;
    box-shadow: 2px 2px 0px rgba(0,0,0,0.3);
  }

  /* Handle long text/code in v-html */
  .prose {
    @apply break-words w-full max-w-full;
    overflow-wrap: anywhere;
  }
  
  .prose pre {
    @apply p-2 bg-black/30 border border-tui-active/30 my-2 font-mono w-full max-w-full;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    word-break: break-all !important;
    overflow-x: hidden;
  }

  .prose code {
    @apply px-1 bg-black/30 text-tui-cyan;
    word-break: break-all !important;
    white-space: pre-wrap !important;
  }

  /* Quoted text in HN often uses <i> or simple indentation */
  .prose i, .prose em {
    @apply border-l-2 border-tui-active/50 pl-2 not-italic text-tui-gray block my-2;
  }

  .prose blockquote {
    @apply border-l-2 border-tui-yellow pl-2 my-2 italic text-tui-gray;
  }

  .tui-comment-branch {
    @apply absolute left-[-14px] md:left-[-20px] top-0 bottom-0 w-[2px] bg-tui-active/30;
  }
  
  .tui-comment-node {
    @apply relative ml-4 md:ml-6 mb-2;
  }

  .tui-comment-node::before {
    content: "├─";
    @apply absolute left-[-16px] md:left-[-20px] top-4 text-tui-active/50 font-mono;
  }

  .tui-comment-node:last-child::before {
    content: "└─";
  }

  .tui-comment-node:last-child > .tui-comment-branch {
    @apply hidden;
  }

  .tui-btn {
    @apply px-3 py-1 bg-tui-gray text-tui-text hover:bg-tui-cyan border-2 border-tui-border shadow-[2px_2px_0px_#000000] active:shadow-none active:translate-x-[1px] active:translate-y-[1px] uppercase font-bold;
  }

  :root[data-theme='commander'] .tui-btn {
    @apply text-tui-bg;
  }

  .tui-f-key {
    @apply flex-1 text-center py-1 border-r border-tui-border last:border-r-0;
  }
  .tui-f-key span {
    @apply text-tui-yellow font-bold mr-1;
  }

  .tui-list-item {
    @apply flex items-start gap-2 p-1 hover:bg-tui-cyan hover:text-tui-bg cursor-pointer;
  }
  
  .tui-list-item.active {
    @apply bg-tui-yellow text-tui-bg;
  }

  .tui-menu-bar {
    @apply bg-tui-gray text-tui-text flex font-mono border-b border-tui-bg sticky top-0 z-10;
  }

  :root[data-theme='light'] .tui-menu-bar,
  :root[data-theme='dark'] .tui-menu-bar {
    @apply text-white;
  }

  :root[data-theme='commander'] .tui-menu-bar {
    @apply text-black;
  }

  .tui-menu-item {
    @apply px-4 py-0.5 hover:bg-tui-bg hover:text-tui-cyan cursor-pointer transition-none relative font-bold;
  }

  .tui-menu-dropdown {
    @apply absolute top-full left-0 bg-tui-gray border-2 border-tui-border shadow-[4px_4px_0px_rgba(0,0,0,0.5)] z-50 min-w-[160px] text-tui-text;
  }

  :root[data-theme='light'] .tui-menu-dropdown {
    @apply text-white;
  }

  :root[data-theme='commander'] .tui-menu-dropdown {
    @apply text-black;
  }

  .tui-dropdown-item {
    @apply px-4 py-1 hover:bg-tui-bg hover:text-tui-cyan whitespace-nowrap flex justify-between gap-4;
  }

  /* System dropdown uses theme-aware text color */
  .tui-sys-menu {
    @apply text-tui-text;
  }

  :root[data-theme='commander'] .tui-sys-menu {
    @apply text-tui-bg;
  }

  /* Reveal shortcuts in dropdown sub-entries on hover */
  .tui-dropdown-item .tui-shortcut {
    @apply opacity-0;
    transition: opacity 80ms linear;
  }

  .tui-dropdown-item:hover .tui-shortcut,
  .tui-dropdown-item:focus-within .tui-shortcut {
    @apply opacity-60;
  }

  @media (hover: none) {
    .tui-dropdown-item .tui-shortcut {
      opacity: 0.6;
    }
  }
}
